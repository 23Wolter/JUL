<html>

<head>
    <script src="/jquery/jquery-3.2.1.min.js"></script>
    <script src="/js/test_create.js"></script>
    <!-- <script src="/js/handleSession.js"></script> -->
    <script src="/js/drag_element.js"></script>

    <link rel="stylesheet" type="text/css" href="stylesheets/style.css">

    <script>
        $(function() {
            $('#teacher_data').bind('submit', function(event) {
                event.preventDefault();

                var user = sessionStorage.getItem('currentUser');
                user = JSON.parse(user);
                var teacherModules = [];

                $('#dropbox_container').find('div span').each(function() {
                    teacherModules.push(this.id); 
                });
                // var checkboxes = $('#teacher_data input:checkbox');

                // for (var i = 0; i < checkboxes.length; i++) {
                //     if (checkboxes[i].checked) {
                //         teacherModules.push(checkboxes[i].id);
                //     }
                // }

                teacherModules.push('nextpage');
                user.teacherModules = teacherModules;
                sessionStorage.setItem('currentUser', JSON.stringify(user));

                $('#data').val(JSON.stringify(user));

                $(this).unbind('submit').submit();
            });

        });
    </script>

    <style>
        #dragbox {
            vertical-align: top; 
            display: inline-block;
            height: 300px; 
            width: 200px; 
            border: 1px solid black; 
        }

        #dropbox {
            /* margin-left: 250px; */
            display: inline-block;
            height: 100px; 
            width: 200px; 
            border: 1px solid black; 
            text-align: center;
        }

        .drag {
            border: 1px solid black; 
            margin-bottom: 10px;
            text-align: center;
            cursor: move;
        }

        #dropbox_container {
            /* margin-left: 500px; */
            vertical-align: top; 
            display: inline-block;
            height: 300px; 
            width: 200px; 
            border: 1px solid black; 
        }
    </style>
</head>

<body>
	<header>
        <% include header %>
    </header>

<!--
    <div id="header">
        <img class="header" id="head_1" src="images/VUC_logo.png" height="100">
        <h3 class="header" id="head_2">NIVEAUAFKLARINGSTEST</h3>
        <h3 class="header" id="head_3">VUC FYN ODENSE</h3>
    </div>
-->


    <form id="teacher_data" class="form" method="post" action="/index_addinfo" enctype="multipart/form-data">

        <div id="section">
            <h1 class="title" id="h1_1">NIVEAUAFKLARINGSTEST</h1>
          
        </div>


        <div id="subsection">
            <h2 class="inline">
                <ol>

                    <li>TILPAS OPSÆTNING AF MODULER I DIN TEST</li>
                    <li>TRYK VIDERE FOR AT OPRETTE EN TEST</li>

                </ol>
            </h2>
            <br/>
            <!--            <input class="h2size" class="inline" type="text" id="initials" id="initials" placeholder="Indtast initialer" required>-->
        </div>

        <div id="bottom">
            <div id="dragbox" ondrop="drop(event)" ondragover="allowDrop(event)">
                    <div id="box1" class="drag" draggable="true" ondragstart="drag(event)" ondragover="clear(event)"><span id="kursistinfo_lærer">Kursist information</span></div>                    
                    <div id="box2" class="drag" draggable="true" ondragstart="drag(event)" ondragover="clear(event)"><span id="orddiktat_lærer">Orddiktat</span></div>
                    <div id="box3" class="drag" draggable="true" ondragstart="drag(event)" ondragover="clear(event)"><span id="vrøvleord_lærer">Vrøvleord</span></div>
                    <div id="box4" class="drag" draggable="true" ondragstart="drag(event)" ondragover="clear(event)"><span id="clozetest_lærer">Clozetest</span></div>
                    <div id="box5" class="drag" draggable="true" ondragstart="drag(event)" ondragover="clear(event)"><span id="tekstforståelse_lærer">Tekstforståelse (multiple choice)</span></div>
                    <div id="box6" class="drag" draggable="true" ondragstart="drag(event)" ondragover="clear(event)"><span id="brev_lærer">Brev</span></div>
            </div>
            <div id="dropbox" ondrop="drop(event)" ondragover="allowDrop(event)">Træk elementer herover for at tilføje dem i bunden</div>
            <div id="dropbox_container"></div>
            
            <!-- <table>
                <tr>
                    <td>Ordblind data: </td>
                    <td><input class="test_options" type="checkbox" id="kursistinfo_lærer"></td>
                </tr>
                <tr>
                    <td>Orddiktat: </td>
                    <td><input class="test_options" type="checkbox" id="orddiktat_lærer"></td>
                </tr>
                <tr>
                    <td>Vrøvlediktat: </td>
                    <td><input class="test_options" type="checkbox" id="vrøvleord_lærer"></td>
                </tr>
                <tr>
                    <td>Clozetest: </td>
                    <td><input class="test_options" type="checkbox" id="clozetest_lærer"></td>
                </tr>
                <tr>
                    <td>Tekstforståelse (multiplechoice): </td>
                    <td><input class="test_options" type="checkbox" id="tekstforståelse_lærer"></td>
                </tr>
                <tr>
                    <td>Brev: </td>
                    <td><input class="test_options" type="checkbox" id="brev_lærer"></td>
                </tr>

            </table> -->
            <input type="hidden" id="data" name="data">
            <br>
            <input class="submit" type="submit" value="Gem/Videre">
        </div>

    </form>


</body>

</html>